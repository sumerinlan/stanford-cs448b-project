<!DOCTYPE html>
<html>

<head>
    <script src='https://d3js.org/d3.v5.min.js'></script>
    <link rel='stylesheet' href='css/main.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
    <title>You Don't Know About Starbucks</title>
    <link rel="shortcut icon" href="favicon.ico" />
</head>

<body>
    <div id='intro-container' class='main section'>

        <h1>You Don't Know About Starbucks</h1>

        <p>
            Americans consume <span class='emphasize'>400 million</span> cups of coffee per day, making the United States the leading consumer of coffee in the world. On average, <span class='emphasize'>250 cups</span> of espresso and coffee drinks are sold per day at almost any espresso drive-thru business with a great visible location. <a href='http://www.e-importz.com/coffee-statistics.php' target='_blank'>Coffee Statistics</a> show that among coffee drinkers the average consumption in the United States is <span class='emphasize'>3 cups</span> of coffee per day.
        </p>
        <p>
            Founded in 1971, the largest coffeehouse chain around the globe - Starbucks has successfully made itself one of the symbols of the modern American lifestyle. For quite a few people, Starbucks is their routine. They get up, get dressed, leave for work, and go to Starbucks before anything else gets done that day.
        </p>
        <p>
            Of course, they care about the <span class='emphasize'>nutrition facts</span> of the drinks and food produced by Starbucks, which are available on its <a href='https://www.starbucks.com/menu' target='_blank'>official website</a> or mobile app. However, since not designed especially for inspecting nutrition facts, the menu is inefficient when it comes to some demands:
        </p>
        <p>
            It is difficult to search for a specific item as well as its nutritional indicators under different preparations, for example, different sizes, especially on the app. It is time-consuming to browse the nutritional information, given that the website and app require clicking and jumping to another page to read the content. On top of that, it is infeasible to make efficient comparisons between two or more products, as users have to switch items back and forth and memorize the numbers.
        </p>
        <p>
            In order to better demonstrate and analyze the nutritional information of Starbucks' drinks as well as to discover the hidden patterns behind the statistics, we have pulled out and analyzed <span class='emphasize'>all the data of the current Starbucks menu</span> on the table. The dataset contains <span class='emphasize'>148 unique drinks,</span> each with various size options and nutritional information, such as calories, sugars, fat, caffeine, etc.
        </p>
    </div>

    <div class='main section'>
        <h1>All about calories</h1>
    </div>

    <div id='facts-container' class='main section'>

        <!-- motivation -->
        <p>
            A handful of springtime drinks have arrived and joined the holiday lineup. Starbucks currently has 148 drinks on its menu, and there are infinite ways to customize them. We leverage the nutrition information a lot when we order drinks, but it is tedious to go back and forth and check out each drink. Therefore, we started our exploration with the basic question: <span class='emphasize'>Is there a more convenient way to know detailed nutritional information based on drinks?</span>
        </p>

        <h2>Basic Facts of Drinks</h2>

        <!-- theorectical support -->
        <p>
            According to the FDA, for an average person, buying meals away from home once per week will gain you about 2 extra pounds per year. Labeling calories data on the menus help customers make healthier decisions about foods and drinks. Aimed to unveil the most valuable information with limited space, we selected two indicators that we think people care most about when they order a drink: calories and sugars.
        </p>

        <!-- design rationale -->
        <p>
            Here we displayed the full menu using an image-based visualizer, where you can easily hover a drink to see its calories and sugars data without being redirected to another page. The numbers are calculated based on the standard recipes: grande size (for most drinks) or doppio size (for espresso), and the default milk indicated in the app. These numbers are displayed in colored bars, with wider bars indicating larger amounts, for better visualization.
        </p>
        <p>
            Drinks are categorized based on the menu to help people better find drinks. To aid searching and filtering functionality, we have added a search bar to allow users to search for drinks by keywords. The full menu is long, so we also created tabs to divide the list.
        </p>

        <!-- findings -->
        <p>
            Many drinks among a sub-category share a similar trend. For example, under "Hot Coffees", americanos are low-calories, while mochas contain more calories and sugars. Also, when a drink is high in calories, the sugars contents are high.
        </p>

        <!-- instruction -->
        <p class='instruction'>
            <span class='emphasize'>Hover</span> above the drinks to inspect detailed nutrition information.
            <span class='emphasize'>Select</span> a tab to the change type.
            <span class='emphasize'>Type</span> in the search bar to filter drinks.
        </p>

        <div class='plot'>
            <div id='facts-nav'>
                <form id='facts-search'>
                    <input type='text' id='facts-keyword' onFocus='' value='' placeholder='Type a name...'>
                </form>
                <div id='facts-tabs'></div>
            </div>

            <div id='facts'></div>
        </div>

        <!-- widget displaying important details -->
        <div id='facts-widget' style='display: none;'>
            <!-- image -->
            <div id='facts-widget-img-container'>
                <img id='facts-widget-img' />
            </div>

            <!-- header: name -->
            <div>
                <p>
                    <span id='facts-widget-name'></span></br>
                    <span id='facts-widget-notes'></span>
                </p>
            </div>

            <!-- facts: calories, sugar, caffeine -->
            <div>
                <p>Calories: <span id='facts-widget-calories'></span></p>
                <!-- bar indicating calories and sugar -->
                <div class="calories-bar">
                    <div id="facts-widget-cal-bar" style="width:70%;">
                    </div>
                </div>
                <p>Sugar: <span id='facts-widget-sugars'></span></p>
                <div class="sugar-bar">
                    <div id="facts-widget-sugar-bar" style="width:70%;">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class='section'>

        <!-- motivation -->
        <p class='main'>
            It is much easier to browse the information now, but only when we have a specific drink in mind. It still takes time if we want to see what type of drinks contain higher calories to avoid, and comparisons still take effort. Also, it provides no information about customized drinks. <span class='emphasize'>Can we acquire all calorie data at a single glance?</span>
        </p>

        <h2 class='main'>Calories of drinks with different sizes</h2>

        <!-- design rationale -->
        <p class='main'>
            In the following visualization, each drink occupies a single line, with the start and end points indicating the range of calories customers can get the drink in various sizes. The exact data points are visible upon hovering. The drinks are sorted by the maximum calories value, so it is easy to see which drinks contain lower or higher calories in general. Lines are colored based on the drinks’ sub-categories, and the categorizing and comparisons are more obvious if you type in the search bar and filter the drinks by their types.
        </p>

        <!-- finding -->
        <p class='main'>
            We can easily see the calories details for each type of drink. For coffees, espresso and americano contain low calories while mochas are high-calorie drinks. Teas are low-calories in general unless milks or lemonade is added. Frappuccinos are high-calorie drinks.
        </p>

        <p class='main'>
            The ranges of calories vary from drinks to drinks. The general trend is that the higher maximum calories goes, the wider the bar is. This quite makes sense: if cold brews have lower calories for their maximum size, it has less room to decrease if the size is reduced. A drink with a wider range of choices can satisfy different customer needs. If I don't care about calories, I can order a venti or even trente size, but if I care about my weight, I can have a healthier choice with the same flavor.
        </p>

        <!-- instruction -->
        <p class='instruction main'>
            <span class='emphasize'>Hover</span> above the lines to see the exact range.
            <span class='emphasize'>Type</span> in the search bar to filter drinks.
        </p>

        <div id='calories-sort-container' class='plot' style='width: 1200px;'></div>

    </div>

    <div id='temperature-container' class='section'>

        <!-- motivation -->
        <p class='main'>
            Sometimes when we have a specific drink in mind, we still need to choose whether to order a hot or a cold one. We start wondering if there is any difference between those two, and <span class='emphasize'>in general, does temperature matter in terms of calories?</span>
        </p>

        <h2 class='main'>Does temperature matter</h2>

        <!-- design rationale -->
        <p class='main'>
            We categorized the drinks based on temperature first for better comparison between hot and cold drinks. The vertical positions are twisted a little bit to avoid occlusion. We used the x-axis and colors to represent different types. We highlighted the chosen (hovered) drink and its corresponding hot/cold option, if there is any, by muting the colors of other drinks. The horizontal bars on the right indicate total calories.
        </p>

        <!-- finding -->
        <p class='main'>
            Each type of drink has distinct characteristics. For coffee, whether hot or cold, there are several beverages (americano, brew coffee, and espresso) concentrated in the low-calorie portion, and the rest is scattered between 100 and 450 calories. Overall, hot tea, cold tea, and cold drinks are low in calories, and hot drinks and Frappuccinos are high-calorie drinks.
        </p>
        <p class='main'>
            In general, for drinks with hot and cold options, hot ones contain higher calories than cold drinks. The numbers are equal for some drinks with low calories already, like americano and espresso.
        </p>

        <!-- instruction -->
        <p class='main instruction'>
            <span class='emphasize'>Hover</span> highlight the current drink and its corresponding hot/cold option.
            <span class='emphasize'>Hover</span> to any empty space to reset the graph.
        </p>

        <svg id='temp-svg' class='plot'>

            <g id='temp-svg-side'>
                <!-- name -->
                <text class='temp-svg-text' id='temp-svg-text-this'></text>
                <!-- calories bar -->
                <rect id='temp-svg-rect-this'></rect>
                <!-- calories data -->
                <text class='temp-svg-text-small' id='temp-svg-text-small-this'></text>

                <!-- name -->
                <text class='temp-svg-text-small' id='temp-svg-text-other'></text>
                <!-- calories bar -->
                <rect id='temp-svg-rect-other'></rect>
                <!-- calories data -->
                <text class='temp-svg-text-small' id='temp-svg-text-small-other'></text>

                <!-- legend -->
                <g id='temp-svg-legend'></g>
            </g>

            <g id='temp-svg-plot'>
                <g id='temp-svg-bg'></g>
                <g id='temp-svg-main'></g>
                <g id='temp-svg-axes'></g>
            </g>
        </svg>
    </div>

    <div id='top-drinks-container' class='section'>

        <!-- motivation -->
        <p class='main'>
            Starbucks’ recipes are ever-changing, but some beverages have won the favor of customers and have always occupied a place on the menu. What are the characteristics of the most popular drinks? <span class='emphasize'>Do people go for high calories drinks or is health their top concern?</span>
        </p>

        <h2 class='main'>Best Starbucks Drinks</h2>

        <!-- design rationale -->
        <p class='main'>
            With the ranking data from <a href='https://www.thrillist.com/' target='_blank'>www.Thrillist.com</a>, we are interested to see how these top-ranked items are distributed by calories and sugars. Similar to the above, the information is of standard grande or doppio sizes.
        </p>
        <p class='main'>
            Top drinks are plotted in a scatter plot with calories as x-axis and sugars as y-axis, with size indicating the number of entries at that spot. To better compare the calories and sugar data between top drinks and drinks, we put all drinks in the plot in light-yellow dots as well. Users can toggle top drinks on and off to better see the full data.
        </p>

        <!-- finding -->
        <p class='main'>
            From the chart, we can see the positive correlation between calories and sugars. We suspected the most popular drinks are among those high-calorie and high-sugar sections, but the data points turn out to be quite evenly distributed at first glance. There are three weak clusters from the chart, from which we reason three patterns of people visiting Starbucks:
        </p>


        <ul class='main'>
            <li>There is a large cluster of low-calorie, sugar-free products, including brewed coffee and americanos, which are suitable for customers who care about their health.</li>
            <li>Beverages are gathered at 150-calories 20g-sugars region, including classic coffee with milk, such as lattes and flat whites, as well as cold drinks. Customers who choose these products consider both taste and health.</li>
            <li>High-calorie products, such as Frappuccinos and mochas, are also very popular, as shown in a cluster at the top-right corner.</li>
        </ul>

        <!-- instruction -->
        <p class='main instruction'>
            <span class='emphasize'>Toggle</span> the checkbox to show or hide top-ranked drinks.
            <span class='emphasize'>Hover</span> the green dots to see drinks and their nutrition information.
        </p>

        <div class='plot'>
            <form class='main'>
                <input type='checkbox' id='top-drinks-checkbox' checked> Show top-ranked drinks
            </form>

            <div id='top-drinks'>
                <svg id='top-drinks-svg'>
                    <g id='top-drinks-svg-plot'>
                        <g id='top-drinks-svg-other'></g>
                        <g id='top-drinks-svg-axes'></g>
                        <g id='top-drinks-svg-legend'>
                            <g id='top-drinks-svg-legend-color'></g>
                            <g id='top-drinks-svg-legend-size'></g>
                        </g>
                        <g id='top-drinks-svg-top'></g>
                    </g>
                </svg>
                <div id='top-drinks-details'></div>
            </div>
        </div>
    </div>

    <div id='donut-container' class='section'>
        <h2 class='main'>Where are those calories from?</h2>

        <div class="main">
            <p>
                With such a wide range of drinks provided at Starbucks, the chain has also realized that an aspiring customer cannot subsist on flat whites and caramel alone. These days, the mermaid emporium has just about as many food items as it does drinks, ranging from hot sandwiches to cold parfaits. Undoubtedly, we are also curious about the best items on the  <a href='https://www.thrillist.com/eat/nation/every-starbucks-food-item-ranked-starbucks-food-menu' target='_blank'>ever-expanding Starbucks menu</a>.
            </p>
            <p>
                Often, the total constitution of calories that a nutritionist recommends for daily intake is as follows:
            </p>
            <ul>
                <li>50%-55% comes from <span class="emphasize">carbohydrates</span>, and there are 4 calories per gram of carbohydrate, which is the main energy source of the human body under normal conditions;</li>
                <li>
                    20%-35% comes from <span class="emphasize">protein</span>, and there are 4 calories per gram of protein;
                </li>
                <li>
                    35% or less comes from <span class="emphasize">fat</span>, and there are 9 calories per gram of fat;
                </li>
                <li>
                    Daily calories from saturated fat should be less than 10%.
                </li>
            </ul>
            <p>
                From the perspective of fitness and reasonable nutrition intake, a diet ratio of <span class="emphasize">40% (carbohydrate): 40% (protein): 20% (fat)</span> is recommended.
            </p>
            <p>
                As a result, we visualized these three important indicators: calories from carbohydrates, calories from protein, and calories from fat, for both the top drinks and food leaderboards of Starbucks. Results show that top food options usually contain a much higher calories than compared with drinks (300-500 cal). But in general, calories from carbohydrates and from fat constitute a great proportion, both in drinks and in food.
            </p>
            <p>
                Moreover, when focusing on the distribution among these 3 indicators, you may would like to consider something like <span class="emphasize">Caffe Latte </span> to drink and <span class="emphasize">Spinach, Feta &Cage-Free Egg White Wrap</span> to eat, since they both have a relatively balanced distribution compared with the other options.
            </p>
            <p>
                <b>How to play &#127861;:</b> The axis and dots represent the calories distribution of the top items, respectively. You can always hover on the following donut graph to see the position of a specific item on the calories axis.
            </p>
        </div>

        

        <div class='plot'>
            <svg id='donut-drinks-dots-svg'></svg>
            <svg id='donut-drinks-donuts-svg'></svg>
            <svg id='donut-food-dots-svg'></svg>
            <svg id='donut-food-donuts-svg'></svg>
        </div>
    </div>

    <div id='food-recommender' class='section'>
        <p class='main'>
            Now we know what to drink. I started to wonder: <span class='emphasize'>What food can I choose to keep total calories intaked below 500 calories?</span>
        </p>

        <h2 class='main'>Food Recommender</h2>

        <p class="main">
            Keeping one meal of the day under 500 calories is considered one of the regular options for fitness people. Many people also choose to make up their own options (food + drink) directly at Starbucks. Here, we have provided a food recommender, where the calories of the drink is provided based on your choice for the item and its size, meanwhile it helps you screen out a list of food you can choose from, so as to limit the total calories within 500.
        </p>
        <p class="main">
            <b>How to play &#127861;:</b>The navigator on the very left can guide you through the types of drink options at Starbucks. You can always click on the sorted drinks directly, as well as the size options. We would automatically provide you with a list of food on the right from which you can choose from, at the meantime maintaining the overall calories under 500.
        </p>

        <div class='plot'>
            <div id='recommender-drink-category'></div>
            <svg id='recommender-drink-svg'>
                <g id='recommender-drink-plot'>
            </svg>
            </svg>
            <div id='recommender-drink-center'>
                <div id='recommender-total-container'>
                    Total calories:
                    <span id='recommender-total'></span>
                </div>
                <div id='recommender-info-container'>
                    <div class='recommender-single-info'>
                        <div id='recommender-drink-text'></div>
                        <div style='height: 30px;'>
                            <div id='recommender-drink-size'></div>
                        </div>
                        <div id='recommender-drink-calories'></div>
                    </div>
                    <div class='recommender-single-info'>
                        <div id='recommender-food-text'></div>
                        <div style='height: 30px;'></div>
                        <div id='recommender-food-calories'></div>
                    </div>
                </div>
            </div>
            <svg id='recommender-food-svg'>
                <g id='recommender-food-plot'>
            </svg>
        </div>
    </div>

    <div class='main section'>
        <h1>Calories & Caffeine</h1>
    </div>

    <div id='caffeine-container' class='section'>
        <h2 class='main'>The perfect efficiency drink? </h2>
        <div class="main">
            <p>
                To a certain extent, people's addiction to coffee is also related to the caffeine contained in coffee.
                The benefits of caffeine consumption include physical endurance, reduction of fatigue and enhancing mental alertness and concentration.
                Therefore, under reasonable intake circumstances, caffeine has a positive effect on improving work efficiency and productivity.
            </p>
            <p>
               But at the same time, we may want to consider calories as an indicator at the same time: for example, espresso with low calories and super high caffeine content will be the perfect key for many people to start a new day. We would like to see more of these drinks as we produced the following caffeine-calories graph: 
            </p>
            <p>
                As can be seen from the scatter plot below, 
            </p>
            <ul>
                <li>
                    Most Starbucks coffee clusters between the 150-250mg level, while Frappuccino, tea and refreshers are generally clustered at &lt; 100mg level.
                </li>
                <li>
                    If you would like to try some "efficiency drink" with high caffeine and low calories, cold brew series and blonde roast series are good options.
                </li>
                <li>
                    Although tea is also considered to be able to provide sufficient caffeine thus bringing an invigorating effect, tea beverages at Starbucks are generally clustered in areas with low caffeine contained( &lt; 50mg).
                </li>
                <li>
                    The popular Frappuccino series turns out to be the most “sleepy” option --- low caffeine and high calories make them not a good choice for efficiency drink, but potential risks that make people more sleepy. But it's not necessarily true, since the large proportion of ice contained may also have a refreshing effect:>
                </li>
            </ul>
            <p>
                <b>How to play &#127861;:</b> The
            </p>
            
        </div>

        

        <div id='caffeine'>
            <svg id='caffeine-svg'>
                <g id='caffeine-svg-plot'>
                    <g id='caffeine-svg-other'></g>
                    <g id='caffeine-svg-axes'></g>
                    <g id='caffeine-svg-legend'>
                        <g id='caffeine-svg-legend-color'></g>
                        <g id='caffeine-svg-legend-size'></g>
                    </g>
                    <g id='caffeine-svg-top'></g>
                </g>
            </svg>
            <div id='caffeine-details'></div>
        </div>
    </div>

    <div id="calories-widget-main" style="position: absolute; padding: 5px; width: 240px; background-color: #f2f0eb; font-family: Helvetica; font-weight: 200; display: none;">

        <!-- image -->
        <div id='calories-img-container'>
            <img id='calories-widget-img' />
        </div>

        <!-- name -->
        <div>
            <p>
                <span id='calories-prod-name'></span></br>
            </p>
        </div>

        <!-- information e.g. calories -->
        <div>
            <p>Calories: <span id='calories-widget-text'></span> kcal</p>

        </div>

    </div>


    <script src='js/main.js' type='module'></script>
    <!-- line and dots -->

    <script type="module">
        import {Runtime, Library, Inspector} from "./js/runtime.js";
    import define from "./js/index.js";
    const inspect = Inspector.into("#calories-sort-container");
    const runtime = new Runtime();

    (new Runtime).module(define, name => (name === "viewof as") && inspect());
    (new Runtime).module(define, name => (name === "viewof b") && inspect());
    // runtime.module(define, name => (name === "viewof sorting") && inspect());
    (new Runtime).module(define, name => (name === "chart") && inspect());

</script>

</body>

</html>
